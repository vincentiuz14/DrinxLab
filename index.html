function updateFlavor() {
  const category = document.getElementById("flavorCategory").value;
  const flavorSelect = document.getElementById("flavor");
  flavorSelect.innerHTML = "";

  const flavors = {
    manis: ["Original Sweet", "Brown Sugar", "Vanilla", "Caramel", "Honey"],
    cokelat: ["Chocolate", "Dark Chocolate", "Cookies & Cream"],
    teh: ["Matcha", "Jasmine", "Thai Tea"],
    buah: ["Strawberry", "Mango", "Lychee"],
    kopi: ["Coffee", "Mocha", "Vanilla Coffee", "Caramel Coffee"]
  };

  if (flavors[category]) {
    flavors[category].forEach(rasa => {
      const opt = document.createElement("option");
      opt.value = rasa;
      opt.textContent = rasa;
      flavorSelect.appendChild(opt);
    });
  }
}

function buatPesanan() {
  const size = document.getElementById("size").value;
  const category = document.getElementById("flavorCategory").value;
  const flavor = document.getElementById("flavor").value;
  const sugar = document.getElementById("sugar").value;
  const ice = document.getElementById("ice").value;
  const note = document.getElementById("note").value;
  const status = document.getElementById("status");

  // Harga dasar (premium)
  const basePrice = {
    Small: 32000,
    Medium: 38000,
    Large: 45000
  };

  let price = basePrice[size];

  // Rasa premium
  const premiumFlavors = [
    "Brown Sugar",
    "Caramel",
    "Matcha",
    "Dark Chocolate",
    "Thai Tea"
  ];

  if (premiumFlavors.includes(flavor)) {
    price += 6000;
  }

  // Jumlah es
  const iceCount = {
    Small: { "No Ice": 0, "Less Ice": 3, "Normal Ice": 5, "Extra Ice": 7 },
    Medium: { "No Ice": 0, "Less Ice": 5, "Normal Ice": 8, "Extra Ice": 10 },
    Large: { "No Ice": 0, "Less Ice": 7, "Normal Ice": 12, "Extra Ice": 15 }
  };

  // Status awal
  status.innerHTML = "üß™ Sedang meracik formula di laboratorium...";

  // Jeda 5 detik
  setTimeout(function () {
    status.innerHTML = `
      ‚úÖ <b>PESANAN SELESAI</b><br><br>
      üß™ Ukuran: ${size}<br>
      üç¨ Rasa: ${category} ‚Üí ${flavor}<br>
      üçØ Gula: ${sugar}<br>
      üßä Es: ${ice} (${iceCount[size][ice]} batu es)<br>
      üìù Catatan: ${note || "-"}<br><br>
      üí∞ <b>Total Harga: Rp${price.toLocaleString("id-ID")}</b>
    `;
  }, 5000);
}
